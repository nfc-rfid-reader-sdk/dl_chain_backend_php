-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Server version:               10.1.31-MariaDB - mariadb.org binary distribution
-- Server OS:                    Win32
-- HeidiSQL Verzija:             9.3.0.4984
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- Dumping database structure for dlchain
CREATE DATABASE IF NOT EXISTS `dlchain` /*!40100 DEFAULT CHARACTER SET binary */;
USE `dlchain`;


-- Dumping structure for table dlchain.api_key
CREATE TABLE IF NOT EXISTS `api_key` (
  `api_key` binary(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=binary COMMENT='API Key';

-- Dumping data for table dlchain.api_key: ~1 rows (approximately)
/*!40000 ALTER TABLE `api_key` DISABLE KEYS */;
INSERT INTO `api_key` (`api_key`) VALUES
	(_binary 0x9B4761E0BFA9A2F8E536B26F6FC7E409A9A4942F23A3FD45C33AE52B8B6CE366);
/*!40000 ALTER TABLE `api_key` ENABLE KEYS */;


-- Dumping structure for table dlchain.blockchain
CREATE TABLE IF NOT EXISTS `blockchain` (
  `block_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Identification number of a block',
  `transaction_block` blob COMMENT 'transaction data received from client',
  `timestamp` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'server timestamp in future from HSM',
  `receiver_public_key` binary(65) DEFAULT NULL COMMENT 'sender public key that acts as address of amount sender',
  `sender_public_key` binary(65) DEFAULT NULL,
  `transaction_amount` bigint(65) DEFAULT NULL COMMENT 'amount that will be transfer in micro units',
  `cash_back_amount` bigint(20) DEFAULT NULL COMMENT 'amount that will be added to Sender in micro units',
  `transaction_fee` bigint(20) DEFAULT NULL COMMENT 'transaction fee that is paid to server holder in micro units',
  `aki` smallint(6) DEFAULT NULL COMMENT 'If key has been compromised, a new key will be used with new ID',
  `data_digest` blob COMMENT 'SHA3 data digest',
  `authority_digital_signature` blob COMMENT 'Server Authority Digital Signature of data digest',
  PRIMARY KEY (`block_id`),
  KEY `timestamp` (`timestamp`),
  KEY `public_key_receiver` (`receiver_public_key`),
  KEY `public_key_sender` (`sender_public_key`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=binary COMMENT='Blockchain of transaction data';

-- Dumping data for table dlchain.blockchain: ~5 rows (approximately)
/*!40000 ALTER TABLE `blockchain` DISABLE KEYS */;
INSERT INTO `blockchain` (`block_id`, `transaction_block`, `timestamp`, `receiver_public_key`, `sender_public_key`, `transaction_amount`, `cash_back_amount`, `transaction_fee`, `aki`, `data_digest`, `authority_digital_signature`) VALUES
	(1, _binary 0x30303030303437364545354333364343394534423844423936423731363141374245343134374542353638453043313930374531443445324535424344393343333532463546343838423743384634383531414431364431433438333245453530363537443245393731333539413533443143333545353442334335354437393036413942323034313530444535413939343933324541414231303539424339393634414543454237363737423738393242413532334345414441324331334638313239393944384541423745373439363834454344313532303441313730443039334645353042363131374331363144393242434445464638394335443142323931423932383345383033303030303030303030303030, '2020-01-18 14:26:23', _binary 0x3034373645453543333643433945344238444239364237313631413742453431343745423536384530433139303745314434453245354243443933433335324635, _binary 0x3034313530444535413939343933324541414231303539424339393634414543454237363737423738393242413532334345414441324331334638313239393944, 100, 10, 1, 1, _binary 0x45374536373832323239373438423832333637314542394533434333304541334335324243313946304337393931353936314437363138304636343635413230, _binary 0x45374536373832323239373438423832333637314542394533434333304541334335324243313946304337393931353936314437363138304636343635413230),
	(2, _binary 0x30303030303437366565356333366363396534623864623936623731363161376265343134376562353638653063313930376531643465326535626364393363333532663566343838623763386634383531616431366431633438333265653530363537643265393731333539613533643163333565353462336335356437393036613962323034313530646535613939343933326561616231303539626339393634616563656237363737623738393262613532336365616461326331336638313239393964386561623765373439363834656364313532303461313730643039336665353062363131376331363164393262636465666638396335643162323931623932383365383033303030303030303030303030, '2020-01-18 14:32:43', _binary 0x3034373665653563333663633965346238646239366237313631613762653431343765623536386530633139303765316434653265356263643933633335326635, _binary 0x3034313530646535613939343933326561616231303539626339393634616563656237363737623738393262613532336365616461326331336638313239393964, 100, 10, 1, 1, _binary 0x45374536373832323239373438423832333637314542394533434333304541334335324243313946304337393931353936314437363138304636343635413230, _binary 0x45374536373832323239373438423832333637314542394533434333304541334335324243313946304337393931353936314437363138304636343635413230),
	(3, _binary 0x00000476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B204150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283E803000000000000, '2020-01-18 14:33:35', _binary 0x0476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B200, _binary 0x04150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283, 100, 10, 1, 1, _binary '', _binary ''),
	(4, _binary 0x00000476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B204150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283E803000000000000, '2020-01-18 14:34:36', _binary 0x0476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B200, _binary 0x04150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283, 100, 10, 1, 1, _binary 0xE7E6782229748B823671EB9E3CC30EA3C52BC19F0C79915961D76180F6465A20, _binary ''),
	(5, _binary 0x00000476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B204150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283E803000000000000, '2020-01-18 14:35:07', _binary 0x0476EE36CC9E4B8DB96B7161A7BE4147EB568E0C1907E1D4E2E5BCD93C352F5F488B7C8F4851AD16D1C4832EE50657D2E971359A53D1C35E54B3C55D7906A9B200, _binary 0x04150DE5A994932EAAB1059BC9964AECEB7677B7892BA523CEADA2C13F812999D8EAB7E749684ECD15204A170D093FE50B6117C161D92BCDEFF89C5D1B291B9283, 100, 10, 1, 1, _binary 0xE7E6782229748B823671EB9E3CC30EA3C52BC19F0C79915961D76180F6465A20, _binary 0xE7E6782229748B823671EB9E3CC30EA3C52BC19F0C79915961D76180F6465A20);
/*!40000 ALTER TABLE `blockchain` ENABLE KEYS */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
